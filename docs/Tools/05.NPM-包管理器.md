---
title: NPM包管理器
date: '2021-10-21 10:34:30'
sidebar: 'auto'
categories:
 - 命令行
tags:
 - Cli
 - Tool
---

## NPM简介

**npm**（全称 Node Package Manager，即“node包管理器”）是[Node.js](https://zh.wikipedia.org/wiki/Node.js)默认的、用[JavaScript](https://zh.wikipedia.org/wiki/JavaScript)编写的[软件包管理系统](https://zh.wikipedia.org/wiki/軟體套件管理系統)。npm会随着Node.js自动安装。npm模块仓库提供了一个名为“registry”的查询服务，用户可通过本地的npm命令下载并安装指定模块。此外用户也可以通过npm把自己设计的模块分发到registry上面

## NPM的由来

npm完全用[JavaScript](https://zh.wikipedia.org/wiki/JavaScript)写成，最初由艾萨克·施吕特（Isaac Z. Schlueter）开发。艾萨克表示自己意识到“模块管理很糟糕”的问题，并看到了[PHP](https://zh.wikipedia.org/wiki/PHP)的[PEAR](https://zh.wikipedia.org/wiki/PEAR)与[Perl](https://zh.wikipedia.org/wiki/Perl)的[CPAN](https://zh.wikipedia.org/wiki/CPAN)等软件的缺点，于是编写了npm。

## NPM的命令行使用

```bash
$ npm <命令> [参数] 
```

## *添加/清除缓存

add/添加：将指定的包添加到本地缓存。此命令主要供 npm 内部使用，但它可以提供一种将数据显式添加到本地安装缓存的方法。

> 感知不强

```bash
$ npm cache add <pkg-name>
```

clean/清除：删除缓存文件夹中的所有数据。请注意，这通常是不必要的，因为 npm 的缓存是自我修复的并且可以抵抗数据损坏问题。

> 目测尝试只能全部删除,不能指定

```bash
$ npm cache clean
$ npm cache clear
$ npm cache rm
```

ls/列表：查看npm缓存列表

```bash
$ npm cache ls
```

verify/验证：验证缓存文件夹的内容，垃圾收集任何不需要的数据，并验证缓存索引和所有缓存数据的完整性

```bash
$ npm cache verify
```

## *快速打开包issues

快速到包的仓库，查看issues，解决/提出问题

```bash
$ npm bugs <pkg-name>
```

## 使用锁快速安装

`npm ci` 在以下情况下会明显更快：

- 有一个`package-lock.json`或`npm-shrinkwrap.json`文件。
- 该`node_modules`文件夹丢失或为空。

```bash
$ npm ci
```

简而言之，使用`npm install`和之间的主要区别`npm ci`是：

- 该项目**必须**具有现有的`package-lock.json`或 `npm-shrinkwrap.json`.
- 如果包锁中的依赖项与 中的不匹配`package.json`， `npm ci`将退出并显示错误，而不是更新包锁。
- `npm ci` 一次只能安装整个项目：无法使用此命令添加单个依赖项。
- 如果 a`node_modules`已经存在，它将在`npm ci`开始安装之前自动删除。
- 它永远不会写入`package.json`或任何包锁：安装基本上是冻结的。

## 命令存放位置

```bash
# 打印全局存放位置
$ npm bin -g
# 打印当前项目存放位置
$ npm bin
```

